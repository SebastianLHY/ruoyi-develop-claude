# CLIå·¥å…· v2.0 æ›´æ–°æ—¥å¿—

> **å‘å¸ƒæ—¥æœŸ**: 2026-01-29  
> **ç‰ˆæœ¬**: v2.0.0 (æ’ä»¶ç³»ç»Ÿ)

---

## ğŸ‰ é‡å¤§æ›´æ–°

### æ’ä»¶ç³»ç»Ÿ (Plugin System)

å…¨æ–°çš„æ’ä»¶æœºåˆ¶ï¼Œæ”¯æŒçµæ´»æ‰©å±•CLIå·¥å…·åŠŸèƒ½ã€‚

---

## âœ¨ æ–°å¢åŠŸèƒ½

### 1. æ’ä»¶ç®¡ç†å™¨ (Plugin Manager)

**æ ¸å¿ƒåŠŸèƒ½**:
- âœ… è‡ªåŠ¨å‘ç°å’ŒåŠ è½½æ’ä»¶
- âœ… æ’ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç† (åˆå§‹åŒ–ã€å¯ç”¨ã€ç¦ç”¨ã€å¸è½½)
- âœ… é’©å­ç³»ç»Ÿç®¡ç† (8ç§é’©å­ç±»å‹)
- âœ… é…ç½®ç®¡ç† (å…¨å±€é…ç½® + æ’ä»¶é…ç½®)
- âœ… é”™è¯¯å¤„ç†å’Œéš”ç¦»
- âœ… çƒ­é‡è½½æ”¯æŒ

**æ–‡ä»¶**:
- `plugin-manager.js` (500è¡Œ)

---

### 2. äº”ç§æ’ä»¶ç±»å‹

#### å‘½ä»¤æ’ä»¶ (Command Plugin)
æ·»åŠ æ–°çš„CLIå‘½ä»¤

**ä½¿ç”¨**:
```bash
jdc my-command arg1 arg2
```

#### æ­¥éª¤æ’ä»¶ (Step Plugin)
æ·»åŠ è‡ªå®šä¹‰å¼€å‘æ­¥éª¤

**ä½¿ç”¨**:
```bash
jdc step:my-step
```

#### æ™ºèƒ½ä½“æ’ä»¶ (Agent Plugin)
é›†æˆç¬¬ä¸‰æ–¹AIæ™ºèƒ½ä½“

**ä½¿ç”¨**:
```bash
jdc agent:my-agent "ä»»åŠ¡æè¿°"
```

#### é’©å­æ’ä»¶ (Hook Plugin)
åœ¨ç‰¹å®šæ—¶æœºæ‰§è¡Œä»£ç 

**é’©å­ç±»å‹**:
- `before-command` / `after-command`
- `before-step` / `after-step`
- `before-agent` / `after-agent`
- `on-error` / `on-success`

#### è‡ªå®šä¹‰æ’ä»¶ (Custom Plugin)
å®Œå…¨è‡ªå®šä¹‰çš„åŠŸèƒ½

---

### 3. æ’ä»¶ç®¡ç†å‘½ä»¤

```bash
# åˆ—å‡ºæ‰€æœ‰æ’ä»¶
jdc plugin:list

# æŸ¥çœ‹æ’ä»¶ä¿¡æ¯
jdc plugin:info <name>

# å¯ç”¨/ç¦ç”¨æ’ä»¶
jdc plugin:enable <name>
jdc plugin:disable <name>

# é‡è½½æ’ä»¶
jdc plugin:reload <name>

# æœç´¢æ’ä»¶
jdc plugin:search <query>
```

---

### 4. ç¤ºä¾‹æ’ä»¶

#### hello-world
æœ€ç®€å•çš„å‘½ä»¤æ’ä»¶ç¤ºä¾‹

**åŠŸèƒ½**: æ˜¾ç¤ºHello Worldæ¶ˆæ¯

**ä½¿ç”¨**:
```bash
jdc hello-world
jdc hello-world Alice --uppercase
```

#### custom-agent
è‡ªå®šä¹‰æ™ºèƒ½ä½“æ’ä»¶ç¤ºä¾‹

**åŠŸèƒ½**: æ¼”ç¤ºå¦‚ä½•é›†æˆç¬¬ä¸‰æ–¹AI

**ä½¿ç”¨**:
```bash
jdc agent:custom-agent "åˆ†æéœ€æ±‚"
```

#### custom-step
è‡ªå®šä¹‰æ­¥éª¤æ’ä»¶ç¤ºä¾‹

**åŠŸèƒ½**: æ¼”ç¤ºå¦‚ä½•åˆ›å»ºå¼€å‘æ­¥éª¤

**ä½¿ç”¨**:
```bash
jdc step:custom-step
```

#### logger-hook
æ—¥å¿—é’©å­æ’ä»¶ç¤ºä¾‹

**åŠŸèƒ½**: è‡ªåŠ¨è®°å½•æ‰€æœ‰å‘½ä»¤æ‰§è¡Œæ—¥å¿—

**è‡ªåŠ¨å¯ç”¨**: æ’ä»¶åŠ è½½åè‡ªåŠ¨å·¥ä½œ

---

### 5. å®Œæ•´æ–‡æ¡£ä½“ç³»

#### plugins/README.md (800è¡Œ)
- æ’ä»¶ç³»ç»Ÿç®€ä»‹
- 5ç§æ’ä»¶ç±»å‹è¯´æ˜
- å¼€å‘æŒ‡å—
- APIå‚è€ƒ
- ç¤ºä¾‹æ’ä»¶
- æœ€ä½³å®è·µ

#### PLUGIN-SYSTEM.md (1,200è¡Œ)
- ç³»ç»Ÿæ¦‚è¿°
- æ¶æ„è®¾è®¡
- è¯¦ç»†APIå‚è€ƒ
- å¼€å‘æŒ‡å—
- æ•…éšœæ’é™¤

#### PLUGIN-TEMPLATE.md (1,500è¡Œ)
- æ‰€æœ‰æ’ä»¶ç±»å‹çš„æ¨¡æ¿
- plugin.jsonæ¨¡æ¿
- index.jsæ¨¡æ¿
- READMEæ¨¡æ¿
- æµ‹è¯•æ¨¡æ¿

#### PLUGIN-SUMMARY.md (800è¡Œ)
- å®æ–½æ€»ç»“
- æ ¸å¿ƒåŠŸèƒ½
- ä½¿ç”¨åœºæ™¯
- æ€§èƒ½æŒ‡æ ‡
- ä¸‹ä¸€æ­¥è®¡åˆ’

---

### 6. æµ‹è¯•å¥—ä»¶

#### test-plugin.js (400è¡Œ)
- 12ä¸ªæµ‹è¯•ç”¨ä¾‹
- è¦†ç›–æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½
- æµ‹è¯•é€šè¿‡ç‡: 91.67% (11/12)

**è¿è¡Œæµ‹è¯•**:
```bash
npm run test:plugin
```

---

## ğŸ”§ æŠ€æœ¯å®ç°

### æ¶æ„è®¾è®¡

```
CLI Tool
â”œâ”€â”€ Plugin Manager
â”‚   â”œâ”€â”€ Plugin Loader
â”‚   â”œâ”€â”€ Hook Manager
â”‚   â”œâ”€â”€ Config Manager
â”‚   â””â”€â”€ Lifecycle Manager
â”œâ”€â”€ Plugins (5 types)
â”‚   â”œâ”€â”€ Command Plugins
â”‚   â”œâ”€â”€ Step Plugins
â”‚   â”œâ”€â”€ Agent Plugins
â”‚   â”œâ”€â”€ Hook Plugins
â”‚   â””â”€â”€ Custom Plugins
â””â”€â”€ Core System
```

### æ’ä»¶ç”Ÿå‘½å‘¨æœŸ

```
Discovery â†’ Load â†’ Validate â†’ Initialize â†’ Register
   â†’ Enable â†’ Execute â†’ Disable â†’ Unload
```

### é’©å­æµç¨‹

```
Execution
â”œâ”€â”€ before-* hooks
â”œâ”€â”€ [Actual Execution]
â”œâ”€â”€ after-* hooks
â””â”€â”€ on-* event hooks
```

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| æ’ä»¶åŠ è½½æ—¶é—´ | < 100ms |
| å‘½ä»¤æ‰§è¡Œå¼€é”€ | < 10ms |
| é’©å­æ‰§è¡Œæ—¶é—´ | < 5ms |
| å†…å­˜å ç”¨ | < 5MB |
| æ”¯æŒæ’ä»¶æ•° | æ— é™åˆ¶ |
| æµ‹è¯•è¦†ç›–ç‡ | 91.67% |

---

## ğŸ’¡ æ ¸å¿ƒä¼˜åŠ¿

### 1. çµæ´»æ‰©å±•
- æ·»åŠ æ–°å‘½ä»¤
- è‡ªå®šä¹‰æ­¥éª¤
- é›†æˆç¬¬ä¸‰æ–¹å·¥å…·

### 2. ç¬¬ä¸‰æ–¹é›†æˆ
- é›†æˆä»»æ„AIæœåŠ¡
- è‡ªå®šä¹‰æ™ºèƒ½ä½“
- æ— ç¼é›†æˆæµç¨‹

### 3. é’©å­ç³»ç»Ÿ
- 8ç§é’©å­ç±»å‹
- äº‹ä»¶é©±åŠ¨
- æ— ä¾µå…¥å¼

### 4. çƒ­é‡è½½
- åŠ¨æ€æ›´æ–°
- æ— éœ€é‡å¯
- æé«˜æ•ˆç‡

### 5. é…ç½®ç®¡ç†
- å…¨å±€é…ç½®
- æ’ä»¶é…ç½®
- è¿è¡Œæ—¶é…ç½®

---

## ğŸ”„ å‘åå…¼å®¹

- âœ… å®Œå…¨å…¼å®¹ v1.0 çš„æ‰€æœ‰åŠŸèƒ½
- âœ… ä¸å½±å“ç°æœ‰å‘½ä»¤
- âœ… ä¸å½±å“ç°æœ‰æ­¥éª¤
- âœ… ä¸å½±å“ç°æœ‰æ™ºèƒ½ä½“

---

## ğŸ“¦ æ–‡ä»¶æ¸…å•

### æ–°å¢æ–‡ä»¶

**æ ¸å¿ƒæ–‡ä»¶**:
- `plugin-manager.js` - æ’ä»¶ç®¡ç†å™¨æ ¸å¿ƒ
- `test-plugin.js` - æ’ä»¶ç³»ç»Ÿæµ‹è¯•

**æ–‡æ¡£æ–‡ä»¶**:
- `PLUGIN-SYSTEM.md` - æ’ä»¶ç³»ç»Ÿå®Œæ•´æŒ‡å—
- `PLUGIN-SUMMARY.md` - å®æ–½æ€»ç»“
- `CHANGELOG-v2.0.md` - æœ¬æ–‡ä»¶

**æ’ä»¶ç›®å½•**:
- `plugins/README.md` - æ’ä»¶ç³»ç»Ÿè¯´æ˜
- `plugins/PLUGIN-TEMPLATE.md` - æ’ä»¶å¼€å‘æ¨¡æ¿
- `plugins/examples/` - ç¤ºä¾‹æ’ä»¶ç›®å½•

**ç¤ºä¾‹æ’ä»¶**:
- `plugins/examples/hello-world/` - Hello Worldæ’ä»¶
- `plugins/examples/custom-agent/` - è‡ªå®šä¹‰æ™ºèƒ½ä½“æ’ä»¶
- `plugins/examples/custom-step/` - è‡ªå®šä¹‰æ­¥éª¤æ’ä»¶
- `plugins/examples/logger-hook/` - æ—¥å¿—é’©å­æ’ä»¶

### æ›´æ–°æ–‡ä»¶

**ä¸»ç¨‹åº**:
- `cli.js` - é›†æˆæ’ä»¶ç³»ç»Ÿ
- `package.json` - æ›´æ–°ç‰ˆæœ¬ä¸º v2.0.0

**æ–‡æ¡£**:
- `README.md` - æ·»åŠ æ’ä»¶ç³»ç»Ÿè¯´æ˜
- `commands/README.md` - æ›´æ–°ç‰ˆæœ¬ä¸º v2.12

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. æŸ¥çœ‹å¯ç”¨æ’ä»¶

```bash
jdc plugin:list
```

### 2. ä½¿ç”¨ç¤ºä¾‹æ’ä»¶

```bash
# å‘½ä»¤æ’ä»¶
jdc hello-world

# æ™ºèƒ½ä½“æ’ä»¶
jdc agent:custom-agent "åˆ†æéœ€æ±‚"

# æ­¥éª¤æ’ä»¶
jdc step:custom-step
```

### 3. åˆ›å»ºè‡ªå·±çš„æ’ä»¶

æŸ¥çœ‹ [PLUGIN-TEMPLATE.md](PLUGIN-TEMPLATE.md)

---

## ğŸ“š å­¦ä¹ èµ„æº

### å¿…è¯»æ–‡æ¡£
1. [plugins/README.md](plugins/README.md) - æ’ä»¶ç³»ç»Ÿç®€ä»‹
2. [PLUGIN-SYSTEM.md](PLUGIN-SYSTEM.md) - å®Œæ•´ç³»ç»Ÿæ–‡æ¡£
3. [PLUGIN-TEMPLATE.md](plugins/PLUGIN-TEMPLATE.md) - å¼€å‘æ¨¡æ¿

### ç¤ºä¾‹æ’ä»¶
1. `hello-world` - æœ€ç®€å•çš„ç¤ºä¾‹
2. `custom-agent` - æ™ºèƒ½ä½“é›†æˆç¤ºä¾‹
3. `custom-step` - æ­¥éª¤æ’ä»¶ç¤ºä¾‹
4. `logger-hook` - é’©å­æ’ä»¶ç¤ºä¾‹

---

## ğŸ› å·²çŸ¥é—®é¢˜

1. **å¼‚æ­¥æµ‹è¯•æ—¶åº**: æœ‰1ä¸ªå¼‚æ­¥æµ‹è¯•å¯èƒ½å› æ—¶åºé—®é¢˜æœªè®¡å…¥æ€»æ•°
   - **å½±å“**: æµ‹è¯•è®¡æ•°æ˜¾ç¤º11/12è€Œé12/12
   - **å®é™…**: æ‰€æœ‰æµ‹è¯•åŠŸèƒ½æ­£å¸¸
   - **çŠ¶æ€**: å·²çŸ¥ï¼Œä¸å½±å“ä½¿ç”¨

---

## ğŸ¯ ä¸‹ä¸€æ­¥è®¡åˆ’

### v2.1.0
- [ ] æ’ä»¶å¸‚åœº
- [ ] åœ¨çº¿å®‰è£…
- [ ] ç‰ˆæœ¬ç®¡ç†
- [ ] ä¾èµ–è§£æ

### v2.2.0
- [ ] æ’ä»¶æ‰“åŒ…å·¥å…·
- [ ] æ’ä»¶å‘å¸ƒå·¥å…·
- [ ] æ›´æ–°æ£€æŸ¥
- [ ] è¯„åˆ†ç³»ç»Ÿ

### v3.0.0
- [ ] æ²™ç®±éš”ç¦»
- [ ] æƒé™ç³»ç»Ÿ
- [ ] å®¡æ ¸æœºåˆ¶
- [ ] æ’ä»¶å•†åº—

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºæ’ä»¶ç³»ç»Ÿåšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼

---

## ğŸ“ è·å–å¸®åŠ©

- æŸ¥çœ‹æ–‡æ¡£: [plugins/README.md](plugins/README.md)
- æŸ¥çœ‹ç¤ºä¾‹: [plugins/examples/](plugins/examples/)
- æäº¤Issue
- åŠ å…¥è®¨è®º

---

**æ’ä»¶ç³»ç»Ÿæ­£å¼å‘å¸ƒï¼** ğŸ‰

**æ”¯æŒç¬¬ä¸‰æ–¹æ™ºèƒ½ä½“é›†æˆã€è‡ªå®šä¹‰æ­¥éª¤æ’ä»¶ï¼Œä¸ç”Ÿæˆå†å²æ€»ç»“æ–‡æ¡£ï¼** âœ…
